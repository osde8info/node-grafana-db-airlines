<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search Items</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">


    <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rel="stylesheet">
    <link href="./css/searchItems.css" rel="stylesheet" type="text/css">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-light bg-light .navbar-static-top" style="background-color: lightgrey;!important;">
    <!-- <a class="navbar-brand" href="#">
      <img
        src="../images/answerMe.png"
        width="30"
        height="30"
        alt=""
      />
    </a> -->
    <img src="../../Assets/images/dominos3.jpg" style="width: 60px;">
    <h2 class="topBrandName">Domino's</h2>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">

            </li>
            <li class="nav-item active">

            </li>
        </ul>
        <!--<div id="ex2" style="margin-right: 15px;">-->
        <!--<span class="fa-stack fa-1x has-badge" data-count="5" style="margin-right: 10px;">-->
        <!--<i class="fa fa-circle fa-stack-2x fa-inverse"></i>-->
        <!--<i class="fa fa-shopping-cart fa-stack-2x dark-cart" style=""></i>-->
        <!--</span>-->
        <!--<button class="btn btn-outline-danger btn-sm" type="button">Clear Cart</button>-->
        <!--</div>-->
        <div class="row">
            <div class="col" style="margin-right: 30px;">
                <button class="btn btn-outline-dark btn-sm" data-target="#cart" data-toggle="modal" type="button"><i
                        aria-hidden="true" class="fa fa-shopping-cart"> </i> <span class="total-count"></span>
                </button>
                <button class="clear-cart btn btn-outline-danger ">Clear Cart</button>
            </div>
        </div>

        <div class="nav-item">
            <h4>Welcome<span class="username" style="margin-left: 10px;">UserName</span></h4>
        </div>
        <button class="btn btn-outline-success my-2 my-sm-0" style="margin-left: 10px;" type="submit">
            Logout
        </button>

    </div>
</nav>
<div class="row" style="margin: 0;background-color: #37474f;" >
    <div class="col-3 " style="">
        <div class="details" style="padding: 30px;margin: 30px;">
            <img src="../../Assets/images/dominos2.png" style="width: 100%">
            <br>
            <center>
                <span style="font-family: Calibri;color: #37474f; font-size: 20px;">Fast Food Restaurent</span>
            </center>
            <div class="row" style="margin-top: 20px;">
                <div class="col-3" style="padding-right:50px; ">
                    <i class="fa fa-phone " style="float: left;margin-left: 60px;"></i>
                </div>
                <div class="col-9" style="padding-left: 40px;">
                    +94117777888
                </div>
            </div>
            <div class="row" style="margin-top: 20px;">
                <div class="col-3" style="padding-right: 50px;">
                    <i class="fa fa-globe " style="float: left;margin-left: 60px;"></i>
                </div>
                <div class="col-9" style="padding-left: 40px;">
                    <a href="http://www.dominos.lk/">Visit Website</a>
                </div>
            </div>
            <div class="row" style="margin-top: 20px;">
                <div class="col-3" style="padding-right: 50px; ">
                    <i class="fa fa-map-marker " style="float: left;margin-left: 60px;"></i>
                </div>
                <div class="col-9" style="padding-left: 40px;">
                    <p style="text-align: left;width: 70%;">No.164, Galle Road,<br>
                        Dehiwala,<br>
                        Sri Lanka.</p>
                </div>
            </div>


        </div>
    </div>
    <div class="col-9 " style="padding: 0;">
        <div class="row">
            <div class="col-12 col-md-12 search-bar-container">
                <form method="post">
                    <input class="textbox" placeholder="Search" type="text">
                    <input class="button" title="Search" type="submit" value="ï€‚ ">
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-md-12  container-item" style="margin-right: 60px;" >
                <div class="row" style="width: 100%;">
                    <div class="card" style="padding: 0; margin: 2px; float: left;">
                        <div class="card" style="width: 19rem; padding: 10px;">
                            <img alt="Card image cap" class="card-img-top" src="../../Assets/images/dominos.png">
                            <div class="card-block">
                                <h3 class="card-title" align="center">Pizza</h3>
                                <p class="card-text">Price(Rs.): <span>500.00</span></p>
                                <p class="card-Prep-time">Preperation Time (min) :<span>12</span></p>
                                <p class="card-Description">Description :<span>Regular/Medium</span></p>
                                <a class="add-to-cart btn btn-primary" data-name="Pizza" data-price="500.00" href="#">Add
                                    to
                                    cart</a>
                            </div>
                        </div>
                    </div>

                    <div class="" style="padding: 0; margin: 2px; float: left;">
                        <div class="card" style="width: 19rem; padding: 10px;">
                            <img alt="Card image cap" class="card-img-top" src="../../Assets/images/dominos.png">
                            <div class="card-block">
                                <h4 class="card-title" align="center">Cake</h4>
                                <p class="card-text">Price(Rs.): <span>200.00</span></p>
                                <p class="card-Prep-time">Preperation Time (min) :<span>20</span></p>
                                <p class="card-Description">Description :<span> Regular/ Medium </span></p>
                                <a class="add-to-cart btn btn-primary" data-name="Cakes" data-price="200.00" href="#">Add
                                    to
                                    cart</a>
                            </div>
                        </div>

                    </div>
                    <div class="card" style="padding: 0; margin: 2px; float: left;">
                        <div class="card" style="width: 19rem; padding: 10px;">
                            <img alt="Card image cap" class="card-img-top" src="../../Assets/images/dominos.png">
                            <div class="card-block">
                                <h3 class="card-title" align="center">Pizza</h3>
                                <p class="card-text">Price(Rs.): <span>500.00</span></p>
                                <p class="card-Prep-time">Preperation Time (min) :<span>12</span></p>
                                <p class="card-Description">Description :<span>Regular/Medium</span></p>
                                <a class="add-to-cart btn btn-primary" data-name="Pizza" data-price="500.00" href="#">Add
                                    to
                                    cart</a>
                            </div>
                        </div>
                    </div>

                    <div class="" style="padding: 0; margin: 2px; float: left;">
                        <div class="card" style="width: 19rem; padding: 10px;">
                            <img alt="Card image cap" class="card-img-top" src="../../Assets/images/dominos.png">
                            <div class="card-block">
                                <h4 class="card-title" align="center">Cake</h4>
                                <p class="card-text">Price(Rs.): <span>200.00</span></p>
                                <p class="card-Prep-time">Preperation Time (min) :<span>20</span></p>
                                <p class="card-Description">Description :<span> Regular/ Medium </span></p>
                                <a class="add-to-cart btn btn-primary" data-name="Cakes" data-price="200.00" href="#">Add
                                    to
                                    cart</a>
                            </div>
                        </div>

                    </div>
                    <div class="card" style="padding: 0; margin: 2px; float: left;">
                        <div class="card" style="width: 19rem; padding: 10px;">
                            <img alt="Card image cap" class="card-img-top" src="../../Assets/images/dominos.png">
                            <div class="card-block">
                                <h3 class="card-title" align="center">Pizza</h3>
                                <p class="card-text">Price(Rs.): <span>500.00</span></p>
                                <p class="card-Prep-time">Preperation Time (min) :<span>12</span></p>
                                <p class="card-Description">Description :<span>Regular/Medium</span></p>
                                <a class="add-to-cart btn btn-primary" data-name="Pizza" data-price="500.00" href="#">Add
                                    to
                                    cart</a>
                            </div>
                        </div>
                    </div>

                    <div class="" style="padding: 0; margin: 2px; float: left;">
                        <div class="card" style="width: 19rem; padding: 10px;">
                            <img alt="Card image cap" class="card-img-top" src="../../Assets/images/dominos.png">
                            <div class="card-block">
                                <h4 class="card-title" align="center">Cake</h4>
                                <p class="card-text">Price(Rs.): <span>200.00</span></p>
                                <p class="card-Prep-time">Preperation Time (min) :<span>20</span></p>
                                <p class="card-Description">Description :<span> Regular/ Medium </span></p>
                                <a class="add-to-cart btn btn-primary" data-name="Cakes" data-price="200.00" href="#">Add
                                    to
                                    cart</a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div>
    <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="cart" role="dialog"
         tabindex="-1">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Cart</h5>
                    <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <table class="show-cart table">

                    </table>
                    <div class="tot-price"
                         style="float: right; background-color: darkgreen;color: white; height: 40px; border-radius: 5px;padding: 10px;">
                        Total Price: Rs.<span class="total-cart"></span></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                    <button class="btn btn-primary" type="button">Order now</button>
                </div>
            </div>
        </div>
    </div>

    <script crossorigin="anonymous"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script crossorigin="anonymous"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script crossorigin="anonymous"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script>
        // ************************************************
        // Shopping Cart API
        // ************************************************

        var shoppingCart = (function () {
            // =============================
            // Private methods and propeties
            // =============================
            cart = [];

            // Constructor
            function Item(name, price, count) {
                this.name = name;
                this.price = price;
                this.count = count;
            }

            // Save cart
            function saveCart() {
                sessionStorage.setItem('shoppingCart', JSON.stringify(cart));
            }

            // Load cart
            function loadCart() {
                cart = JSON.parse(sessionStorage.getItem('shoppingCart'));
            }

            if (sessionStorage.getItem("shoppingCart") != null) {
                loadCart();
            }


            // =============================
            // Public methods and propeties
            // =============================
            var obj = {};

            // Add to cart
            obj.addItemToCart = function (name, price, count) {
                for (var item in cart) {
                    if (cart[item].name === name) {
                        cart[item].count++;
                        saveCart();
                        return;
                    }
                }
                var item = new Item(name, price, count);
                cart.push(item);
                saveCart();
            }
            // Set count from item
            obj.setCountForItem = function (name, count) {
                for (var i in cart) {
                    if (cart[i].name === name) {
                        cart[i].count = count;
                        break;
                    }
                }
            };
            // Remove item from cart
            obj.removeItemFromCart = function (name) {
                for (var item in cart) {
                    if (cart[item].name === name) {
                        cart[item].count--;
                        if (cart[item].count === 0) {
                            cart.splice(item, 1);
                        }
                        break;
                    }
                }
                saveCart();
            }

            // Remove all items from cart
            obj.removeItemFromCartAll = function (name) {
                for (var item in cart) {
                    if (cart[item].name === name) {
                        cart.splice(item, 1);
                        break;
                    }
                }
                saveCart();
            }

            // Clear cart
            obj.clearCart = function () {
                cart = [];
                saveCart();
            }

            // Count cart
            obj.totalCount = function () {
                var totalCount = 0;
                for (var item in cart) {
                    totalCount += cart[item].count;
                }
                return totalCount;
            }

            // Total cart
            obj.totalCart = function () {
                var totalCart = 0;
                for (var item in cart) {
                    totalCart += cart[item].price * cart[item].count;
                }
                return Number(totalCart.toFixed(2));
            }

            // List cart
            obj.listCart = function () {
                var cartCopy = [];
                for (i in cart) {
                    item = cart[i];
                    itemCopy = {};
                    for (p in item) {
                        itemCopy[p] = item[p];

                    }
                    itemCopy.total = Number(item.price * item.count).toFixed(2);
                    cartCopy.push(itemCopy)
                }
                return cartCopy;
            }

            // cart : Array
            // Item : Object/Class
            // addItemToCart : Function
            // removeItemFromCart : Function
            // removeItemFromCartAll : Function
            // clearCart : Function
            // countCart : Function
            // totalCart : Function
            // listCart : Function
            // saveCart : Function
            // loadCart : Function
            return obj;
        })();


        // *****************************************
        // Triggers / Events
        // *****************************************
        // Add item
        $('.add-to-cart').click(function (event) {
            event.preventDefault();
            var name = $(this).data('name');
            var price = Number($(this).data('price'));
            shoppingCart.addItemToCart(name, price, 1);
            displayCart();
        });

        // Clear items
        $('.clear-cart').click(function () {
            shoppingCart.clearCart();
            displayCart();
        });


        function displayCart() {
            var cartArray = shoppingCart.listCart();
            var output = "";
            for (var i in cartArray) {
                output += "<tr>"
                    + "<td>" + cartArray[i].name + "</td>"
                    + "<td>Rs." + cartArray[i].price + "</td>"
                    + "<td><div class='input-group'><button class='minus-item input-group-addon btn btn-outline-primary ' data-name=" + cartArray[i].name + ">-</button>"
                    + "<input style='height: 40px;' type='number' class='item-count form-control' data-name='" + cartArray[i].name + "' value='" + cartArray[i].count + "'>"
                    + "<button class='plus-item btn btn-outline-primary input-group-addon ' data-name=" + cartArray[i].name + ">+</button></div></td>"
                    + "<td><button class='btn btn-outline-danger delete-item' data-name=" + cartArray[i].name + ">Remove</button></td>"
                    + " = "
                    + "<td>Rs." + cartArray[i].total + "</td>"
                    + "</tr>";
            }
            $('.show-cart').html(output);
            $('.total-cart').html(shoppingCart.totalCart());
            $('.total-count').html(shoppingCart.totalCount());
        }

        // Delete item button

        $('.show-cart').on("click", ".delete-item", function (event) {
            var name = $(this).data('name')
            shoppingCart.removeItemFromCartAll(name);
            displayCart();
        })


        // -1
        $('.show-cart').on("click", ".minus-item", function (event) {
            var name = $(this).data('name')
            shoppingCart.removeItemFromCart(name);
            displayCart();
        })
        // +1
        $('.show-cart').on("click", ".plus-item", function (event) {
            var name = $(this).data('name')
            shoppingCart.addItemToCart(name);
            displayCart();
        })

        // Item count input
        $('.show-cart').on("change", ".item-count", function (event) {
            var name = $(this).data('name');
            var count = Number($(this).val());
            shoppingCart.setCountForItem(name, count);
            displayCart();
        });

        displayCart();

    </script>
</body>
</html>